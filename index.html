<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SneakerHues â€“ Watermelon</title>
<style>
  @font-face {
    font-family: 'AccessMN';
    src: url('Access MN Medium.ttf') format('truetype');
    font-weight: 500;
    font-style: normal;
    font-display: swap;
  }

  :root {
    --green:#35BA89;
    --pink:#FF5B78;
    --offwhite:#F9F7EF;
    --gray:#E7E7E7;
    --bg:#F9F7EF;
  }

  * { box-sizing: border-box; margin:0; padding:0; }

  body {
    background: var(--bg);
    font-family: 'AccessMN', system-ui, sans-serif;
    height: 100vh;
    overflow: hidden;
  }

  .grid {
    display: grid;
    grid-template-columns: 65% 35%;
    height: 100%;
  }

  .left {
    padding: 40px;
  }

  .right {
    padding: 100px 40px;
  }

  svg {
    width: 100%;
    height: auto;
  }

  #detail, #background { pointer-events: none; }
  #fillable > g[id] * { cursor: pointer; }
  #fillable > g[id]:hover * { filter: brightness(1.06); }

  h1 { font-size: 50px; margin-bottom: 20px; }
  .score { font-size: 20px; margin: 20px 0; }

  .palette {
    display: grid;
    grid-template-columns: repeat(4, 54px);
    gap: 16px;
    margin: 20px 0;
  }
  .swatch {
    width: 54px; height: 54px;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,.2);
    cursor: pointer;
  }
  .swatch.active { outline: 3px solid #000; }

  .btn { font-size: 20px; padding: 10px 14px; border: 1px solid #000; cursor: pointer; border-radius: 10px; background: transparent; }
</style>
</head>
<body>
<div class="grid">
  <div class="left">
    <div id="sneaker-wrap">
      <!-- Inline your airmax1.svg here -->
    </div>
  </div>
  <div class="right">
    <h1>I JUST WANNA COLOUR IN</h1>
    <div class="palette" id="palette"></div>
    <div class="score">Score: <span id="score">0</span> / 18</div>
    <button id="freeMode" class="btn">Free Mode</button>
    <input type="color" id="colorPicker" class="hidden"/>
  </div>
</div>

<script>
const correctColors = {
  logo: "#35BA89",
  eyestay: "#35BA89",
  airbag: "#35BA89",
  midsole: "#F9F7EF",
  tongue: "#F9F7EF",
  laces: "#F9F7EF",
  lining: "#E7E7E7",
  tonguelining: "#E7E7E7",
  outsole: "#35BA89",
  tonguelabel: "#F9F7EF",
  undermiddle: "#F9F7EF",
  lacecover: "#F9F7EF",
  layer: "#E7E7E7",
  toebox: "#F9F7EF",
  top: "#F9F7EF",
  swoosh: "#FF5B78",
  back: "#E7E7E7",
  middle: "#E7E7E7",
  mudguard: "#35BA89"
};

let score = 0;
let activeColor = null;
let freeMode = false;

const paletteEl = document.getElementById("palette");
const scoreEl = document.getElementById("score");
const colorPicker = document.getElementById("colorPicker");
const freeModeBtn = document.getElementById("freeMode");

// generate palette (game mode)
function randomColor(){
  return '#'+Math.floor(Math.random()*16777215).toString(16).padStart(6,'0');
}
function buildPalette(){
  paletteEl.innerHTML = '';
  const required = [...new Set(Object.values(correctColors))];
  const pool = [...required];
  while(pool.length < 12){ pool.push(randomColor()); }
  shuffle(pool).forEach(c=>{
    const sw = document.createElement('div');
    sw.className='swatch';
    sw.style.background=c;
    sw.addEventListener('click',()=>{
      document.querySelectorAll('.swatch').forEach(s=>s.classList.remove('active'));
      sw.classList.add('active');
      activeColor=c;
    });
    paletteEl.appendChild(sw);
  });
}
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }

function updateScore(){
  scoreEl.textContent = score;
}

function attachFillables(){
  const svg = document.querySelector("#sneaker-wrap svg");
  if(!svg) return;
  svg.querySelectorAll("#fillable > g[id]").forEach(g=>{
    g.addEventListener('click',()=>{
      if(!activeColor && !freeMode) return;
      const id = g.id;
      const chosen = freeMode ? colorPicker.value : activeColor;
      g.querySelectorAll('*').forEach(el=>el.setAttribute('fill',chosen));
      if(!freeMode && correctColors[id] && chosen.toUpperCase()===correctColors[id]){
        score++;
        updateScore();
      }
    });
  });
}

// free mode toggle
freeModeBtn.addEventListener('click',()=>{
  freeMode=!freeMode;
  if(freeMode){
    colorPicker.classList.remove('hidden');
    colorPicker.click();
  }else{
    colorPicker.classList.add('hidden');
    buildPalette();
  }
});
colorPicker.addEventListener('input',(e)=>{
  activeColor=e.target.value;
});

buildPalette();
attachFillables();
</script>
</body>
</html>
